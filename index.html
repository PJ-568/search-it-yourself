<!DOCTYPE html>
<html lang="zh-Hans-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=350px, initial-scale=1.0" />
    <title>è‡ªå·±æœå»</title>
    <meta
      name="description"
      content="ç»™ä¸æ„¿æ„æˆ–ä¸ä¼šè‡ªå·±æœç´¢çš„äººç±»ï¼Œå¿«é€Ÿç”Ÿæˆæ•™ä»–ä»¬æœç´¢é¡µé¢çš„å·¥å…·"
    />
    <meta name="repo" content="search-it-yourself" />
    <meta name="author" content="wasteest, pj568" />
    <meta name="license" content="cc by-sa 4.0" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EğŸ”%3C/text%3E%3C/svg%3E"
    />
    <style>
      :root,
      html {
        padding: 0;
        margin: 0;
        height: 100%;
      }

      body {
        margin: 0;
        padding: 40px 20px;
        font-family: Arial, sans-serif;
        background-color: #e6e6e6;
        color: #333333;
      }

      h1 {
        text-align: center;
        font-weight: bold;
        color: #333333;
      }

      .search-container {
        max-width: 600px;
        margin: 20vh auto 0 auto;
        text-align: center;
      }

      .search-form {
        display: flex;
        gap: 10px;
        justify-content: center;
        align-items: center;
      }

      .search-input {
        padding: 12px;
        font-size: 16px;
        border: none;
        background: #f5f5f5;
        width: 300px;
      }

      .search-button {
        padding: 12px 24px;
        font-size: 16px;
        border: none;
        background: #888;
        color: white;
        cursor: pointer;

        svg {
          width: 16px;
          height: 16px;
        }
      }

      .search-button:hover {
        background: #555;
      }

      /* æ·±è‰²æ¨¡å¼æ”¯æŒ */
      @media (prefers-color-scheme: dark) {
        :root,
        html,
        body {
          background-color: #212121;
          color: #f1f1f1;
        }

        h1 {
          color: #f1f1f1;
        }

        .search-input {
          background: #333333;
          color: #f1f1f1;
          border: 1px solid #555555;
        }

        .search-button {
          background: #4a90e2;
          color: #f1f1f1;
          border: 1px solid #357abd;
        }

        .search-button:hover {
          background: #357abd;
        }
      }

      /* æœç´¢ç»“æœæ ·å¼ */
      .search-result {
        margin-top: 30px;
        text-align: center;
      }

      .result-code-block {
        display: inline-block;
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        padding: 15px;
        margin: 10px 0;
        font-family: "Courier New", monospace;
        font-size: 14px;
        color: #495057;
        cursor: pointer;
        transition: all 0.2s ease;
        max-width: 100%;
        word-break: break-all;
      }

      .result-code-block:hover {
        background: #e9ecef;
        border-color: #adb5bd;
      }

      .result-code-block:active {
        background: #dee2e6;
        transform: scale(0.98);
      }

      .copy-notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #1f512b;
        color: white;
        padding: 10px 20px;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 1000;
      }

      .copy-notification.show {
        opacity: 1;
      }

      /* æ·±è‰²æ¨¡å¼ä¸‹çš„æœç´¢ç»“æœæ ·å¼ */
      @media (prefers-color-scheme: dark) {
        .result-code-block {
          background: #2d3748;
          border-color: #4a5568;
          color: #e2e8f0;
        }

        .result-code-block:hover {
          background: #4a5568;
          border-color: #718096;
        }

        .result-code-block:active {
          background: #718096;
        }
      }

      /* æœ‰åºåˆ—è¡¨æ ·å¼ */
      .list-div {
        display: none;
        background: #12121211;
        max-width: 600px;
        margin: 40px auto 0;
        padding: 1rem;
        position: relative;

        a {
          text-decoration: underline;
          cursor: pointer;
          position: absolute;
          top: 1rem;
          right: 1rem;
        }
      }

      .list-div li {
        margin-bottom: 1rem;
        color: inherit;
      }

      .list-div li:last-child {
        margin-bottom: 0;
      }

      .list-div li p {
        margin: 0;
        padding: 0;
      }

      /* æ·±è‰²æ¨¡å¼ä¸‹çš„æœ‰åºåˆ—è¡¨æ ·å¼ */
      @media (prefers-color-scheme: dark) {
        .list-div {
          background: #e9ecef11;
        }

        .list-div li {
          color: #f1f1f1;
        }
      }

      .cursor {
        color: #333333;
        display: none;
        top: -24px;
        left: -24px;
        position: fixed;
        width: 24px;
        height: 24px;
        z-index: 1000;
        pointer-events: none;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        filter: drop-shadow(0 0 0.3rem white);
      }

      .cursor.visible {
        display: block;
      }

      .cursor.click {
        animation: clickPulse 0.3s ease-in-out;
      }

      @keyframes clickPulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }

      /* è¾“å…¥æ¡†ç„¦ç‚¹çŠ¶æ€ä¸‹çš„å…‰æ ‡ */
      .search-input.focused {
        box-shadow: 0 0 0 2px #007bff;
      }

      /* æŒ‰é’®ç‚¹å‡»æ•ˆæœ */
      .search-button.clicked {
        transform: scale(0.95);
        transition: transform 0.1s ease;
      }

      /* æ·±è‰²æ¨¡å¼ä¸‹çš„å…‰æ ‡ */
      @media (prefers-color-scheme: dark) {
        .cursor {
          color: #e9ecef;
          filter: drop-shadow(0 0 0.3rem black);
        }
      }
    </style>
  </head>
  <body>
    <div class="search-container">
      <h1>è‡ªå·±æœå»</h1>
      <form class="search-form" id="searchForm" action="javascript:void(0);">
        <input
          type="text"
          class="search-input"
          id="searchInput"
          name="q"
          placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹"
          autofocus
        />
        <button type="submit" class="search-button">
          <!-- MIT Copyright (c) 2018-2025 Tabler -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-search"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
            <path d="M21 21l-6 -6" />
          </svg>
        </button>
      </form>

      <!-- æœç´¢ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
      <div class="search-result" id="searchResult" style="display: none">
        <div class="result-code-block" id="resultLink" title="ç‚¹å‡»å¤åˆ¶é“¾æ¥">
          <!-- æœç´¢é“¾æ¥å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
      </div>
    </div>

    <!-- å¤åˆ¶æˆåŠŸæç¤º -->
    <div class="copy-notification" id="copyNotification">
      é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼
    </div>

    <div class="list-div">
      <ol>
        <li>
          <p>è¾“å…¥è¦æœç´¢çš„å†…å®¹ï¼›</p>
        </li>
        <li>
          <p>ç‚¹å‡»æœç´¢æŒ‰é’®ï¼›</p>
        </li>
        <li>
          <p>å°†ç”Ÿæˆçš„é“¾æ¥å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå‘ç»™ä¸æ„¿æ„æˆ–ä¸ä¼šè‡ªå·±æœç´¢çš„äººç±»ã€‚</p>
        </li>
      </ol>
      <a
        onclick="javascript:window.open('?q=Z2l0IHJlcG8gc2VhcmNoLWl0LXlvdXJzZWxmIHBqNTY4')"
        >é¡¹ç›®æºç </a
      >
    </div>

    <div class="cursor">
      <!-- MIT Copyright (c) 2018-2025 Tabler -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-pointer"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path
          d="M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z"
        />
      </svg>
    </div>

    <script>
      // è¯­è¨€æ£€æµ‹å’Œç¿»è¯‘åŠŸèƒ½
      function detectLanguage() {
        // è·å–æµè§ˆå™¨è¯­è¨€åå¥½
        const browserLang =
          navigator.language || navigator.userLanguage || "zh-CN";

        // æ£€æŸ¥æ˜¯å¦ä¸ºè‹±è¯­ï¼ˆåŒ…å« en å¼€å¤´çš„è¯­è¨€ä»£ç ï¼‰
        const isEnglish = browserLang.startsWith("en");

        // ç¿»è¯‘æ˜ å°„
        const translations = {
          title: "Search It Yourself",
          mainTitle: "Search It Yourself",
          inputPlaceholder: "Enter search content",
          copyNotification: "Link copied to clipboard!",
          emptyInputAlert: "Please enter search content",
          instruction1: "Enter the content to search;",
          instruction2: "Click the search button;",
          instruction3:
            "Copy the generated link to clipboard and send it to people who are unwilling or unable to search themselves.",
          projectSource: "Project Source Code",
        };

        // å¦‚æœæ˜¯è‹±è¯­ï¼Œåˆ™è¿›è¡Œç¿»è¯‘
        if (isEnglish) {
          // ç¿»è¯‘é¡µé¢æ ‡é¢˜
          document.title = translations.title;

          // ç¿»è¯‘ä¸»æ ‡é¢˜
          const mainTitle = document.querySelector("h1");
          if (mainTitle) {
            mainTitle.textContent = translations.mainTitle;
          }

          // ç¿»è¯‘è¾“å…¥æ¡†å ä½ç¬¦
          const searchInput = document.getElementById("searchInput");
          if (searchInput) {
            searchInput.placeholder = translations.inputPlaceholder;
          }

          // ç¿»è¯‘å¤åˆ¶æˆåŠŸæç¤º
          const copyNotification = document.getElementById("copyNotification");
          if (copyNotification) {
            copyNotification.textContent = translations.copyNotification;
          }

          // ç¿»è¯‘ä½¿ç”¨è¯´æ˜
          const listDiv = document.querySelector(".list-div");
          if (listDiv) {
            const instructions = listDiv.querySelectorAll("p");
            if (instructions.length >= 3) {
              instructions[0].textContent = translations.instruction1;
              instructions[1].textContent = translations.instruction2;
              instructions[2].textContent = translations.instruction3;
            }

            // ç¿»è¯‘é¡¹ç›®æºç é“¾æ¥
            const projectSourceLink = listDiv.querySelector("a");
            if (projectSourceLink) {
              projectSourceLink.textContent = translations.projectSource;
            }
          }
        }

        return isEnglish;
      }

      // åˆå§‹åŒ–æ—¶æ‰§è¡Œè¯­è¨€æ£€æµ‹
      document.addEventListener("DOMContentLoaded", function () {
        detectLanguage();
      });

      // è·å–é¡µé¢å…ƒç´ 
      const searchForm = document.getElementById("searchForm");
      const searchInput = document.getElementById("searchInput");
      const searchResult = document.getElementById("searchResult");
      const resultLink = document.getElementById("resultLink");
      const copyNotification = document.getElementById("copyNotification");
      const listDiv = document.querySelector(".list-div");
      const cursor = document.querySelector(".cursor");
      const searchButton = document.querySelector(".search-button");

      // å…‰æ ‡åŠ¨ç”»å‡½æ•°
      function moveCursorTo(element, callback, x = 0, y = 0) {
        const rect = element.getBoundingClientRect();
        const cursorRect = cursor.getBoundingClientRect();

        // è®¡ç®—å…‰æ ‡åº”è¯¥ç§»åŠ¨åˆ°çš„ä½ç½®ï¼ˆå…ƒç´ ä¸­å¿ƒï¼‰
        const targetX = rect.left + rect.width / 2 - cursorRect.width / 2 + x;
        const targetY = rect.top + rect.height / 2 - cursorRect.height / 2 + y;

        cursor.style.left = targetX + "px";
        cursor.style.top = targetY + "px";

        setTimeout(callback, 1000); // ç­‰å¾…ç§»åŠ¨åŠ¨ç”»å®Œæˆ
      }

      // ç‚¹å‡»å…‰æ ‡åŠ¨ç”»
      function clickCursor(callback) {
        cursor.classList.add("click");
        setTimeout(() => {
          cursor.classList.remove("click");
          if (callback) callback();
        }, 400);
      }

      // é€å­—è¾“å…¥åŠ¨ç”»
      function typeText(text, callback) {
        let index = 0;
        searchInput.value = "";

        function typeNextChar() {
          if (index < text.length) {
            searchInput.value += text[index];
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
            index++;
            setTimeout(typeNextChar, 100); // æ¯ä¸ªå­—ç¬¦é—´éš” 100ms
          } else {
            if (callback) callback();
          }
        }

        typeNextChar();
      }

      // åŠ¨ç”»åºåˆ—æ§åˆ¶å™¨
      function runAnimationSequence(queryValue) {
        // æ˜¾ç¤ºå…‰æ ‡
        cursor.classList.add("visible");

        // æ­¥éª¤ 1: å…‰æ ‡ä»å³ä¸Šè§’ç§»åŠ¨åˆ°æœç´¢æ¡†
        setTimeout(() => {
          moveCursorTo(
            searchInput,
            () => {
              // æ­¥éª¤ 2: ç‚¹å‡»æœç´¢æ¡†
              clickCursor(() => {
                searchInput.classList.add("focused");

                // ç­‰å¾…ç„¦ç‚¹æ•ˆæœï¼Œç„¶åå¼€å§‹è¾“å…¥
                setTimeout(() => {
                  // æ­¥éª¤ 3: é€å­—è¾“å…¥æŸ¥è¯¢å†…å®¹
                  typeText(decodeURIComponent(queryValue), () => {
                    // ç­‰å¾…è¾“å…¥å®Œæˆ
                    setTimeout(() => {
                      // æ­¥éª¤ 4: å…‰æ ‡ç§»åŠ¨åˆ°æœç´¢æŒ‰é’®
                      moveCursorTo(
                        searchButton,
                        () => {
                          // æ­¥éª¤ 5: ç‚¹å‡»æœç´¢æŒ‰é’®
                          clickCursor(() => {
                            searchButton.classList.add("clicked");

                            // ç­‰å¾…ç‚¹å‡»æ•ˆæœï¼Œç„¶åè·³è½¬
                            setTimeout(() => {
                              // æ­¥éª¤ 6: è·³è½¬åˆ°bingæœç´¢
                              window.location.href = `https://bing.com/search?q=${queryValue}`;
                            }, 200);
                          });
                        },
                        searchButton.offsetWidth * 0.3,
                        searchButton.offsetHeight * 0.3
                      );
                    }, 100);
                  });
                }, 300);
              });
            },
            searchInput.offsetWidth * 0.4,
            searchInput.offsetHeight * 0.3
          );
        }, 1000); // 1 ç§’åå¼€å§‹åŠ¨ç”»
      }

      // é¡µé¢åˆå§‹åŒ–æ—¶æ£€æŸ¥å‚æ•° q çš„å€¼
      function initializePage() {
        const urlParams = new URLSearchParams(window.location.search);
        let encodedQueryValue = urlParams.get("q");

        // å¯¹è·å–åˆ°çš„ç¼–ç å€¼è¿›è¡Œ Base64 è§£ç 
        let queryValue = "";
        if (encodedQueryValue) {
          try {
            queryValue = decodeURIComponent(escape(atob(encodedQueryValue)));
          } catch (error) {
            // å¦‚æœè§£ç å¤±è´¥ï¼Œä½¿ç”¨åŸå§‹å€¼ï¼ˆå…¼å®¹æ—§é“¾æ¥ï¼‰
            queryValue = encodedQueryValue;
          }
        }

        // å¦‚æœ q å‚æ•°æ— æˆ–ç©ºï¼Œæ˜¾ç¤º .list-div
        if (!queryValue || queryValue.trim() === "") {
          listDiv.style.display = "block";
        } else {
          // éšè—é»˜è®¤å…‰æ ‡
          const style = document.createElement("style");
          style.textContent = "*,html,:root { cursor: none !important; }";
          document.head.appendChild(style);

          // é˜»æ­¢æ‰€æœ‰é¼ æ ‡äº‹ä»¶å’Œé”®ç›˜äº‹ä»¶
          document.addEventListener(
            "click",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            },
            true
          );

          document.addEventListener(
            "mousedown",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            },
            true
          );

          document.addEventListener(
            "mouseup",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            },
            true
          );

          document.addEventListener(
            "mousemove",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            },
            true
          );

          document.addEventListener(
            "keydown",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            },
            true
          );

          document.addEventListener(
            "keyup",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            },
            true
          );

          document.addEventListener(
            "keypress",
            function (e) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
            },
            true
          );

          // å¼€å§‹åŠ¨ç”»åºåˆ—
          runAnimationSequence(queryValue);
        }
      }
      initializePage();

      // ç›‘å¬è¡¨å•æäº¤äº‹ä»¶
      searchForm.addEventListener("submit", function (event) {
        event.preventDefault(); // é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º

        const searchValue = searchInput.value.trim();

        // æ£€æŸ¥è¾“å…¥æ¡†æ˜¯å¦ä¸ºç©º
        if (!searchValue) {
          alert(isEnglish ? "Please enter search content" : "è¯·è¾“å…¥æœç´¢å†…å®¹");
          return;
        }

        // ç”Ÿæˆæœç´¢é“¾æ¥ï¼Œå¯¹æœç´¢å€¼è¿›è¡Œ Base64 ç¼–ç æ··æ·†
        const currentUrl = window.location.href.split("?")[0]; // è·å–å½“å‰é¡µé¢è·¯å¾„ï¼Œå»é™¤æŸ¥è¯¢å‚æ•°
        const obfuscatedValue = btoa(unescape(encodeURIComponent(searchValue)));
        const searchLink = `${currentUrl}?q=${encodeURIComponent(
          obfuscatedValue
        )}`;

        // åœ¨ä»£ç å—ä¸­æ˜¾ç¤ºé“¾æ¥
        resultLink.textContent = searchLink;
        searchResult.style.display = "block";

        // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
        searchResult.scrollIntoView({ behavior: "smooth", block: "nearest" });
      });

      // ç›‘å¬ç»“æœé“¾æ¥ç‚¹å‡»äº‹ä»¶ï¼Œå®ç°å¤åˆ¶åŠŸèƒ½
      resultLink.addEventListener("click", async function () {
        const linkText = resultLink.textContent;

        try {
          // ä½¿ç”¨ç°ä»£å‰ªè´´æ¿ API
          await navigator.clipboard.writeText(linkText);

          // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
          copyNotification.classList.add("show");

          // 3 ç§’åéšè—æç¤º
          setTimeout(() => {
            copyNotification.classList.remove("show");
          }, 3000);
        } catch (err) {
          // å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨çš„å¤‡ç”¨æ–¹æ¡ˆ
          console.warn("ç°ä»£å‰ªè´´æ¿ API ä¸å¯ç”¨ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ");

          // åˆ›å»ºä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
          const textArea = document.createElement("textarea");
          textArea.value = linkText;
          textArea.style.position = "fixed";
          textArea.style.left = "-999999px";
          textArea.style.top = "-999999px";
          document.body.appendChild(textArea);
          textArea.focus();
          textArea.select();

          try {
            document.execCommand("copy");

            // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
            copyNotification.classList.add("show");

            // 3 ç§’åéšè—æç¤º
            setTimeout(() => {
              copyNotification.classList.remove("show");
            }, 3000);
          } catch (err) {
            alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥ï¼š" + linkText);
          }

          // æ¸…ç†ä¸´æ—¶å…ƒç´ 
          document.body.removeChild(textArea);
        }
      });

      // ç›‘å¬è¾“å…¥æ¡†å›è½¦é”®äº‹ä»¶ï¼Œç¡®ä¿åœ¨æŒ‰ä¸‹å›è½¦é”®æ—¶è§¦å‘è¡¨å•æäº¤
      searchInput.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
          event.preventDefault(); // é˜»æ­¢è¾“å…¥æ¡†çš„é»˜è®¤å›è½¦è¡Œä¸º
          searchForm.dispatchEvent(new Event("submit"));
        }
      });

      // è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶éšè—ä¹‹å‰çš„ç»“æœ
      searchInput.addEventListener("focus", function () {
        searchResult.style.display = "none";
      });
    </script>
  </body>
</html>
